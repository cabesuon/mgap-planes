<div class="mat-elevation-z8">

  <mat-form-field class="p-2">
    <mat-label>Filtrar</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. 52468">
  </mat-form-field>

  <mat-table [dataSource]="dataSource" matSort>

    <!-- navigate tools -->

    <!-- GotoVistaMapa-->
    <ng-container matColumnDef="GotoVistaMapa">
      <mat-header-cell *matHeaderCellDef> </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <button mat-icon-button (click)="actionClick(element.__plan__, 'GotoVistaMapa')"
        matTooltip="Ver en Mapa">
          <mat-icon><fa-icon icon="map"></fa-icon></mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <!-- GotoVistaAdministrativo-->
    <ng-container matColumnDef="GotoVistaAdministrativo">
      <mat-header-cell *matHeaderCellDef> </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <button mat-icon-button (click)="actionClick(element.__plan__, 'GotoVistaAdministrativo')"
        matTooltip="Ver en Administrativo">
          <mat-icon><fa-icon icon="search"></fa-icon></mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <ng-container *ngFor="let c of columns">
      <ng-container matColumnDef="{{c.name}}">
        <ng-container *ngIf="c.sort; else noSortBlock">
          <mat-header-cell *matHeaderCellDef mat-sort-header> {{c.label}} </mat-header-cell>
        </ng-container>
        <ng-template #noSortBlock>
          <mat-header-cell *matHeaderCellDef> {{c.label}} </mat-header-cell>
        </ng-template>
        <mat-cell *matCellDef="let element"> {{element[c.name]}} </mat-cell>
      </ng-container>
    </ng-container>

    <!-- actions tools -->

    <!-- EstadoAction-->
    <ng-container matColumnDef="EstadoAction">
      <mat-header-cell *matHeaderCellDef> </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <ng-container *ngIf="element.__plan__.planEstado === 1 || element.__plan__.planEstado === 3">
          <button mat-icon-button
          (click)="actionClick(element.__plan__, (element.__plan__.planEstado === 1 ? 'Presentar' : 'RevisarPago'))"
          matTooltip="{{element.__plan__.planEstado === 1 ? 'Presentar Plan' : 'Revisar Pago'}}"
          >
            <mat-icon>
              <fa-icon
              icon="{{element.__plan__.planEstado === 1 ? 'file-signature' : 'file-invoice-dollar'}}">
              </fa-icon>
            </mat-icon>
          </button>
        </ng-container>
      </mat-cell>
    </ng-container>

    <!-- Descartar-->
    <ng-container matColumnDef="Descartar">
      <mat-header-cell *matHeaderCellDef> </mat-header-cell>
      <mat-cell *matCellDef="let element">
        <button mat-icon-button (click)="actionClick(element.__plan__, 'Descartar')"
        matTooltip="Descartar Plan">
          <mat-icon><fa-icon icon="trash"></fa-icon></mat-icon>
        </button>
      </mat-cell>
    </ng-container>

    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
  </mat-table>
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</div>
